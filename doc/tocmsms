#!/bin/sh

#
# Script for transforming HTML
# generated by doxygen into something
# compatible with CMSMS
#
# G Chabert, May 2013
#
# - Transforms the braces characers { and } 
#   into their HTML codes #123 and #125
#   *Warning* This will also impact the javascripts!!  -> solution: restore javascript the file by hand?
#
# - Add into each <a> a call to scroll(..)
#

files=`ls -1 *.html`

for x in $files
do
  sed "s/{/\&#123;/g" -i $x
  sed "s/}/\&#125;/g" -i $x
  sed "s/href=\"#\([^\"]*\)\"/href=\"#\1\" onclick=\"scroll('#\1')\"/g" -i $x
  sed "s/href=\"$x#\([^\"]*\)\"/href=\"#\1\" onclick=\"scroll('#\1')\"/g" -i $x
done   

